# generate nginx site configs for multiple domains
let sites = ["example.com", "static.example.com"] in

map (\s @nginx/sites-available/{s}.conf {{"
server {
    listen 80;
    server_name {{s}};
    root /var/www/{{s}}/html;
    index index.html index.htm;

    location / {
        try_files $uri $uri/ =404;
    }
}
"}}) sites
